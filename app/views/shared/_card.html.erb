<%# Shared card component that can be used for both courses and locations %>
<%# 
  Required locals:
  - item: The course or location object
  - type: Either 'course' or 'location'
  - link_path: The path to link to (e.g. course_path(course))
  
  Optional locals:
  - show_details: Boolean to show additional details (default: true)
  - height: Custom height for the image (default: 'h-40')
  - classes: Additional classes to add to the card (default: '')
%>

<%= link_to link_path, class: "block group #{local_assigns[:classes] || ''}" do %>
  <div class="bg-white rounded-lg shadow-sm overflow-hidden">
    <%# Image Section %>
    <div class="relative <%= local_assigns[:height] || 'h-40' %>">
      <% if item.image_url.present? %>
        <%= image_tag item.image_url, class: "w-full h-full object-cover", alt: item.name %>
      <% else %>
        <%= image_tag type == 'course' ? Course::DEFAULT_IMAGE_URL : 'placeholder_golf_course.jpg', 
            class: "w-full h-full object-cover", 
            alt: "#{item.name} image" %>
      <% end %>
      
      <%# Overlay with Title and Key Info %>
      <div class="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent">
        <h3 class="text-white font-semibold text-sm truncate"><%= item.name %></h3>
        <div class="flex justify-between items-center mt-1">
          <% if type == 'course' %>
            <span class="text-white/90 text-xs"><%= item.course_type.humanize %></span>
            <span class="text-white font-bold text-sm">$<%= item.green_fee %></span>
          <% else %>
            <span class="text-white/90 text-xs">
              <%= pluralize(item.courses.count, 'course') %> â€¢ Avg: <%= number_to_currency(item.avg_green_fee, precision: 0) %>
            </span>
          <% end %>
        </div>
      </div>
    </div>

    <%# Additional Details Section %>
    <% if show_details %>
      <div class="p-4">
        <div class="flex justify-between items-center">
          <% if type == 'course' %>
            <div class="flex items-center text-gray-600">
              <% if item.course_type == 'public' %>
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              <% elsif item.course_type == 'private' %>
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
              <% else %>
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              <% end %>
              <span class="text-xs"><%= item.course_type.humanize %></span>
            </div>
          <% else %>
            <div class="text-sm text-gray-600">
              Est. Trip: <%= number_to_currency(item.estimated_trip_cost, precision: 0) %>
            </div>
          <% end %>
          <%= link_to "View #{type.titleize}", link_path, class: "text-sm text-blue-600 hover:text-blue-800 font-medium" %>
        </div>
      </div>
    <% end %>
  </div>
<% end %> 